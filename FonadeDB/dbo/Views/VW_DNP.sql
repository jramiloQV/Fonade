CREATE VIEW VW_DNP (Id_Ciudad, NomCiudad, Nombres, Apellidos, Id_Departamento, NomDepartamento, razonsocial, Telefono, Email, Nit, ValorRecomendado, NomInstitucion, NomUnidad, Id_Proyecto, NomProyecto, Valor_Aporte, Inactivo, Id_Sector, NomSector) AS SELECT T1.Id_Ciudad, T1.NomCiudad, T2.Nombres, T2.Apellidos, T4.Id_Departamento, T4.NomDepartamento, T5.razonsocial, T5.Telefono, T5.Email, T5.Nit, T7.ValorRecomendado, T8.NomInstitucion, T8.NomUnidad, T9.Id_Proyecto, T9.NomProyecto, Sum(T10.Valor), T11.Inactivo, T12.Id_Sector, T12.NomSector FROM Ciudad T1, Contacto T2, ConvocatoriaProyecto T3, departamento T4, Empresa T5, EmpresaContacto T6, EvaluacionObservacion T7, Institucion T8, Proyecto T9, ProyectoAporte T10, ProyectoContacto T11, Sector T12, SubSector T13 WHERE T1.Id_Ciudad=T5.CodCiudad AND T2.Id_Contacto=T11.CodContacto AND T3.CodProyecto=T9.Id_Proyecto AND T4.Id_Departamento=T1.CodDepartamento AND T5.codproyecto=T9.Id_Proyecto AND T6.codcontacto=T2.Id_Contacto AND T7.CodProyecto=T9.Id_Proyecto AND T8.Id_Institucion=T9.CodInstitucion AND T10.CodProyecto=T9.Id_Proyecto AND T11.CodProyecto=T9.Id_Proyecto AND T13.Id_SubSector=T9.CodSubSector AND T12.Id_Sector=T13.CodSector AND T6.RepresentanteLegal=1 GROUP BY T1.Id_Ciudad, T1.NomCiudad, T2.Nombres, T2.Apellidos, T4.Id_Departamento, T4.NomDepartamento, T5.razonsocial, T5.Telefono, T5.Email, T5.Nit, T7.ValorRecomendado, T8.NomInstitucion, T8.NomUnidad, T9.Id_Proyecto, T9.NomProyecto, T11.Inactivo, T12.Id_Sector, T12.NomSector